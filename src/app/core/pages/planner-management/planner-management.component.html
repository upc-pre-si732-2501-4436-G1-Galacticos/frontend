<div class="planner-container">
  <!-- Columna izquierda: crear plan -->
  <div class="planner-form">
    <h2>{{ 'PLANNER.CREATE_TITLE' | translate }}</h2>

    <form class="planner-form-content" (ngSubmit)="submitNewPlan()" #planForm="ngForm">
      <label>{{ 'PLANNER.FORM.TITLE_LABEL' | translate }}</label>
      <input type="text" [(ngModel)]="newPlan.title" name="title" required />

      <label>{{ 'PLANNER.FORM.DESCRIPTION_LABEL' | translate }}</label>
      <textarea [(ngModel)]="newPlan.description" name="description" required></textarea>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>{{ 'PLANNER.FORM.TAGS_LABEL' | translate }}</mat-label>
        <mat-select [(ngModel)]="newPlan.tagNames" name="tagNames" multiple>
          <mat-option *ngFor="let tag of availableTags" [value]="tag.title">
            {{ tag.title }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <button type="submit" [disabled]="!planForm.form.valid">
        {{ 'PLANNER.FORM.CREATE_BUTTON' | translate }}
      </button>
    </form>
  </div>

  <!-- Columna derecha: listas -->
  <div class="planner-lists">
    <section>
      <h2>{{ 'PLANNER.COMMUNITY_TITLE' | translate }}</h2>
      <div *ngIf="communityPlans.length === 0">
        <p>{{ 'PLANNER.NO_PLANS_FOUND' | translate }}</p>
      </div>

      <div class="plan-list">
        <div class="plan-card" *ngFor="let plan of communityPlans">
          <div class="card-header">
            <h3 class="card-title">{{ plan.title }}</h3>
          </div>
          <div class="card-content">
            <p>{{ plan.description }}</p>
            <div *ngIf="plan.tagNames?.length">
              <span class="tag" *ngFor="let tag of plan.tagNames">#{{ tag }}</span>
            </div>
          </div>
          <div class="card-actions">
            <button (click)="openPlanDetails(plan)">
              {{ 'PLANNER.DETAILS_BUTTON' | translate }}
            </button>
            <button (click)="assignPlanToUser(plan.id)">
              {{ 'PLANNER.ASSIGN_BUTTON' | translate }}
            </button>
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2>{{ 'PLANNER.RECOMMENDED_TITLE' | translate }}</h2>
      <div *ngIf="recommendedPlans.length === 0">
        <p>{{ 'PLANNER.NO_PLANS_FOUND' | translate }}</p>
      </div>

      <div class="plan-list">
        <div class="plan-card" *ngFor="let plan of recommendedPlans">
          <div class="card-header">
            <h3 class="card-title">{{ plan.title }}</h3>
          </div>
          <div class="card-content">
            <p>{{ plan.description }}</p>
            <div *ngIf="plan.tagNames?.length">
              <span class="tag" *ngFor="let tag of plan.tagNames">#{{ tag }}</span>
            </div>
          </div>
          <div class="card-actions">
            <button (click)="openPlanDetails(plan)">
              {{ 'PLANNER.DETAILS_BUTTON' | translate }}
            </button>
            <button (click)="assignPlanToUser(plan.id)">
              {{ 'PLANNER.ASSIGN_BUTTON' | translate }}
            </button>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>
